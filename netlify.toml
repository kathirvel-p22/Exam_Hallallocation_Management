[build]
  publish = "public"
  command = "echo 'PHP build complete'"

[build.environment]
  PHP_VERSION = "8.1"

[[redirects]]
  from = "/*"
  to = "/index.php"
  status = 200

[[redirects]]
  from = "/auth/*"
  to = "/auth/index.php"
  status = 200

[[redirects]]
  from = "/admin/*"
  to = "/admin/index.php"
  status = 200

[[redirects]]
  from = "/student/*"
  to = "/student/index.php"
  status = 200

[functions]
  directory = "functions"
  node_bundler = "esbuild"

[dev]
  command = "php -S localhost:8000"
  port = 8000
  publish = "public"

[context.production.environment]
  APP_ENV = "production"
  APP_DEBUG = "false"

[context.deploy-preview.environment]
  APP_ENV = "staging"
  APP_DEBUG = "true"

[context.branch-deploy.environment]
  APP_ENV = "staging"
  APP_DEBUG = "true"